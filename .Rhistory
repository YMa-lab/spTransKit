xlab("No. Locations") +
ylab("Relative\nPeak Memory\nAllocation")
# Plot Figure 4e
p <- p1 / p2
ggsave(filename = "figure4e.pdf", plot = p, device = cairo_pdf, path = paste(path_save, "Main", "Figure_4", sep = "/"), width = 15, height = 10, units = "in")
ggsave(filename = "figure4e-f_legend.pdf",
plot = p +
theme(legend.position = "right",
legend.text = element_text(size = 24, family = "Arial", color = "black"),
legend.title = element_text(size = 30, family = "Arial", color = "black", hjust = 0.5,
margin = margin(b = 10)),
legend.key = element_blank(),
legend.key.size = unit(1, "cm"),
legend.key.spacing.y = unit(0.5, "cm")),
device = cairo_pdf, path = paste(path_save, "Main", "Figure_4", sep = "/"), width = 15, height = 15, units = "in")
# Color palette for Figure 4f
palette <- c("#eac7d1","#725e95","#c9c4c5","#f9d5baff","#DB4C6C","#428fe2ff","#912946","#cb738c","#567832","#4d908e","#f7c685","#ceb798","#F19C79","#907a96","#2c9f2c","#93796C","#adc6e8","#997273")
# Generate data for Figure 4f
gene_runtime <- read.csv(paste(path_eval, "Open-ST/Human_MLN_3/july_results/gene_runtime.csv", sep = "/"), header = 1)
colnames(gene_runtime) <- c("Transformation", 1000, 5000, 10000, 15000, 20000, 25000, 30000, 35000, 39867)
gene_runtime <- gene_runtime[gene_runtime$Transformation != "DESeq2 (log1p)", ]
gene_runtime[, 2:ncol(gene_runtime)] <- gene_runtime[, 2:ncol(gene_runtime)] / gene_runtime[, 2]
gene_runtime <- gene_runtime %>% gather(Gene, Runtime, -Transformation)
gene_runtime$Gene <- as.integer(gene_runtime$Gene)
gene_memory <- read.csv(paste(path_eval, "Open-ST/Human_MLN_3/july_results/gene_memory.csv", sep = "/"), header = 1)
colnames(gene_memory) <- c("Transformation", 1000, 5000, 10000, 15000, 20000, 25000, 30000, 35000, 39867)
gene_memory <- gene_memory[gene_memory$Transformation != "DESeq2 (log1p)", ]
gene_memory[, 2:ncol(gene_memory)] <- gene_memory[, 2:ncol(gene_memory)] / gene_memory[, 2]
gene_memory <- gene_memory %>% gather(Gene, Memory, -Transformation)
gene_memory$Gene <- as.integer(gene_memory$Gene)
gene_runtime$Transformation[gene_runtime$Transformation == "DESeq2 (log)"] <- "DESeq2"
gene_runtime$Transformation[gene_runtime$Transformation == "scanpy Pearson Residual"] <- "scanpy Pear. Res."
gene_runtime$Transformation[gene_runtime$Transformation == "Analytic Pearson (clip)"] <- "Analytic Pear. (clip)"
gene_runtime$Transformation[gene_runtime$Transformation == "Analytic Pearson (no clip)"] <- "Analytic Pear. (no clip)"
gene_memory$Transformation[gene_memory$Transformation == "DESeq2 (log)"] <- "DESeq2"
gene_memory$Transformation[gene_memory$Transformation == "scanpy Pearson Residual"] <- "scanpy Pear. Res."
gene_memory$Transformation[gene_memory$Transformation == "Analytic Pearson (clip)"] <- "Analytic Pear. (clip)"
gene_memory$Transformation[gene_memory$Transformation == "Analytic Pearson (no clip)"] <- "Analytic Pear. (no clip)"
# Runtime Plot
p3 <- ggplot(gene_runtime, aes(Gene, Runtime, color = Transformation)) +
geom_vline(xintercept = 309, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 351, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 980, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 2421, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 5006, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 10000, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 20249, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 22804, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 24652, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 27188, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 30696, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 37750, linetype = "dotted", color = "gray", size = 1.5) +
geom_line(size = 2) +
theme(axis.text.y = element_text(size = 28, family = "Arial", color = "black"),
axis.text.x = element_blank(),
axis.ticks.x = element_blank(),
axis.title.x = element_blank(),
axis.title.y = element_text(size = 30, family = "Arial", color = "black",
margin = margin(l = 20)),
legend.position = "none",
panel.grid = element_blank(),
panel.background = element_rect(color = "black", fill = "white", size = 3)) +
scale_color_manual(values = palette) +
ylab("Relative\nRuntime")
# Memory Plot
p4 <- ggplot(gene_memory, aes(Gene, Memory, color = Transformation)) +
geom_vline(xintercept = 309, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 351, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 980, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 2421, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 5006, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 10000, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 20249, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 22804, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 24652, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 27188, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 30696, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 37750, linetype = "dotted", color = "gray", size = 1.5) +
geom_line(size = 2) +
theme(axis.text.x = element_text(size = 28, family = "Arial", color = "black",
angle = 45, hjust = 1),
axis.text.y = element_text(size = 28, family = "Arial", color = "black"),
axis.title.x = element_text(size = 30, family = "Arial", color = "black",
margin = margin(t = 15)),
axis.title.y = element_text(size = 30, family = "Arial", color = "black"),
legend.position = "none",
panel.grid = element_blank(),
panel.background = element_rect(color = "black", fill = "white", size = 3)) +
scale_color_manual(values = palette) +
xlab("No. Genes") +
ylab("Relative\nPeak Memory\nAllocation")
# Plot Figure 4f
p <- p3 / p4
ggsave(filename = "figure4f.pdf", plot = p, device = cairo_pdf, path = paste(path_save, "Main", "Figure_4", sep = "/"), width = 15, height = 10, units = "in")
# Color palette for Figure 4e
palette <- c("#eac7d1","#725e95","#c9c4c5","#f9d5baff","#DB4C6C","#428fe2ff","#912946","#cb738c","#567832","#4d908e","#f7c685","#ceb798","#F19C79","#907a96","#2c9f2c","#93796C","#adc6e8","#997273")
# Generate data for Figure 4e
spot_runtime <- read.csv(paste(path_eval, "10x_Xenium_Prime/Human_Prostate/july_results/spot_runtime.csv", sep = "/"), header = 1)
colnames(spot_runtime) <- c("Transformation", 1000, 5000, 10000, 25000, 50000, 100000, 125000, 150000, 175000, 192502)
spot_runtime <- spot_runtime[spot_runtime$Transformation != "DESeq2 (log1p)", ]
spot_runtime[, 2:ncol(spot_runtime)] <- spot_runtime[, 2:ncol(spot_runtime)] / spot_runtime[, 2]
spot_runtime <- spot_runtime %>% gather(Location, Runtime, -Transformation)
spot_runtime$Location <- as.integer(spot_runtime$Location)
spot_memory <- read.csv(paste(path_eval, "10x_Xenium_Prime/Human_Prostate/july_results/spot_memory.csv", sep = "/"), header = 1)
colnames(spot_memory) <- c("Transformation", 1000, 5000, 10000, 25000, 50000, 100000, 125000, 150000, 175000, 192502)
spot_memory <- spot_memory[spot_memory$Transformation != "DESeq2 (log1p)", ]
spot_memory[, 2:ncol(spot_memory)] <- spot_memory[, 2:ncol(spot_memory)] / spot_memory[, 2]
spot_memory <- spot_memory %>% gather(Location, Memory, -Transformation)
spot_memory$Location <- as.integer(spot_memory$Location)
spot_runtime$Transformation[spot_runtime$Transformation == "DESeq2 (log)"] <- "DESeq2"
spot_runtime$Transformation[spot_runtime$Transformation == "scanpy Pearson Residual"] <- "scanpy Pear.\nRes."
spot_runtime$Transformation[spot_runtime$Transformation == "Analytic Pearson (clip)"] <- "Analytic Pear.\n(clip)"
spot_runtime$Transformation[spot_runtime$Transformation == "Analytic Pearson (no clip)"] <- "Analytic Pear.\n(no clip)"
spot_memory$Transformation[spot_memory$Transformation == "DESeq2 (log)"] <- "DESeq2"
spot_memory$Transformation[spot_memory$Transformation == "scanpy Pearson Residual"] <- "scanpy Pear. Res."
spot_memory$Transformation[spot_memory$Transformation == "Analytic Pearson (clip)"] <- "Analytic Pear.\n(clip)"
spot_memory$Transformation[spot_memory$Transformation == "Analytic Pearson (no clip)"] <- "Analytic Pear.\n(no clip)"
# Runtime Plot
p1 <- ggplot(spot_runtime, aes(Location, Runtime, color = Transformation)) +
geom_vline(xintercept = 1287, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 2854, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 4882, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 6443, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 34311, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 26135, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 46352, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 57536, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 73467, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 99218, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 116198, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 152412, linetype = "dotted", color = "gray", size = 1.5) +
geom_line(size = 2) +
theme(axis.text.y = element_text(size = 28, family = "Arial", color = "black"),
axis.text.x = element_blank(),
axis.ticks.x = element_blank(),
axis.title.x = element_blank(),
axis.title.y = element_text(size = 30, family = "Arial", color = "black",
margin = margin(l = 20)),
legend.position = "none",
legend.key = element_blank(),
panel.grid = element_blank(),
panel.background = element_rect(color = "black", fill = "white", size = 3)) +
scale_color_manual(values = palette) +
ylab("Relative\nRuntime")
# Memory Plot
p2 <- ggplot(spot_memory, aes(Location, Memory, color = Transformation)) +
geom_vline(xintercept = 1287, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 2854, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 4882, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 6443, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 34311, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 26135, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 46352, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 57536, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 73467, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 99218, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 116198, linetype = "dotted", color = "gray", size = 1.5) +
geom_vline(xintercept = 152412, linetype = "dotted", color = "gray", size = 1.5) +
geom_line(size = 2) +
theme(axis.text.x = element_text(size = 28, family = "Arial", color = "black",
angle = 45, hjust = 1),
axis.text.y = element_text(size = 28, family = "Arial", color = "black"),
axis.title = element_text(size = 30, family = "Arial", color = "black"),
legend.position = "none",
panel.grid = element_blank(),
panel.background = element_rect(color = "black", fill = "white", linewidth = 3)) +
scale_color_manual(values = palette) +
xlab("No. Locations") +
ylab("Relative\nPeak Memory\nAllocation")
# Plot Figure 4e
p <- p1 / p2
ggsave(filename = "figure4e.pdf", plot = p, device = cairo_pdf, path = paste(path_save, "Main", "Figure_4", sep = "/"), width = 15, height = 10, units = "in")
ggsave(filename = "figure4e-f_legend.pdf",
plot = p +
theme(legend.position = "right",
legend.text = element_text(size = 24, family = "Arial", color = "black"),
legend.title = element_text(size = 30, family = "Arial", color = "black", hjust = 0.5,
margin = margin(b = 10)),
legend.key = element_blank(),
legend.key.spacing.y = unit(0.5, "cm")),
device = cairo_pdf, path = paste(path_save, "Main", "Figure_4", sep = "/"), width = 15, height = 15, units = "in")
## --- Coordinates: three clusters ---
n_per <- 10
coords <- rbind(
cbind(runif(n_per, 0, 1), runif(n_per, 0, 1)),   # Cluster 1
cbind(runif(n_per, 2, 3), runif(n_per, 0, 1)),   # Cluster 2
cbind(runif(n_per, 4, 5), runif(n_per, 0, 1))    # Cluster 3
)
## --- Values: Cluster 1 & 2 = random, Cluster 3 = 0 ---
vals <- c(
rnorm(n_per, mean = 0, sd = 1),   # Cluster 1: random normal
rnorm(n_per, mean = 0, sd = 1),   # Cluster 2: random normal
rep(0, n_per)                     # Cluster 3: all zero
)
## --- Build neighbors: 4-nearest neighbors ---
k   <- 4
nb  <- knn2nb(knearneigh(coords, k = k))
install.packages("spdep")
library(spdep)
## --- Coordinates: three clusters ---
n_per <- 10
coords <- rbind(
cbind(runif(n_per, 0, 1), runif(n_per, 0, 1)),   # Cluster 1
cbind(runif(n_per, 2, 3), runif(n_per, 0, 1)),   # Cluster 2
cbind(runif(n_per, 4, 5), runif(n_per, 0, 1))    # Cluster 3
)
## --- Values: Cluster 1 & 2 = random, Cluster 3 = 0 ---
vals <- c(
rnorm(n_per, mean = 0, sd = 1),   # Cluster 1: random normal
rnorm(n_per, mean = 0, sd = 1),   # Cluster 2: random normal
rep(0, n_per)                     # Cluster 3: all zero
)
## --- Build neighbors: 4-nearest neighbors ---
k   <- 4
nb  <- knn2nb(knearneigh(coords, k = k))
lw  <- nb2listw(nb, style = "W")
## --- Moran's I ---
moran.test(vals, lw)
set.seed(123)
## --- Fixed coordinates for 3 clusters ---
n_per <- 10
coords <- rbind(
cbind(runif(n_per, 0, 1), runif(n_per, 0, 1)),   # Cluster 1
cbind(runif(n_per, 2, 3), runif(n_per, 0, 1)),   # Cluster 2
cbind(runif(n_per, 4, 5), runif(n_per, 0, 1))    # Cluster 3
)
idx12 <- 1:(2 * n_per)  # indices for clusters 1 & 2
## --- Neighbor graphs (row-standardized weights) ---
k <- 4
nb_all <- knn2nb(knearneigh(coords, k = k))
lw_all <- nb2listw(nb_all, style = "W", zero.policy = TRUE)
nb_12 <- knn2nb(knearneigh(coords[idx12, , drop = FALSE], k = k))
lw_12 <- nb2listw(nb_12, style = "W", zero.policy = TRUE)
## --- Simulation: 1,000 runs, using moran.test() ---
nsim <- 1000
I_all <- numeric(nsim)
I_12  <- numeric(nsim)
for (b in 1:nsim) {
# Values: Clusters 1 & 2 random; Cluster 3 zeros
vals <- c(
rnorm(n_per, 0, 1),   # Cluster 1
rnorm(n_per, 0, 1),   # Cluster 2
rep(0, n_per)         # Cluster 3
)
# All three clusters
res_all <- moran.test(vals, lw_all, zero.policy = TRUE)
I_all[b] <- res_all$estimate[["Moran I statistic"]]
# Clusters 1–2 only
res_12 <- moran.test(vals[idx12], lw_12, zero.policy = TRUE)
I_12[b] <- res_12$estimate[["Moran I statistic"]]
}
## --- Plot two boxplots with clear title & legend ---
df <- rbind(
data.frame(Group = "Clusters 1–3 (1&2 random, 3=0)", Morans_I = I_all),
data.frame(Group = "Clusters 1–2 only (random)",     Morans_I = I_12)
)
df$Group <- factor(df$Group,
levels = c("Clusters 1–3 (1&2 random, 3=0)",
"Clusters 1–2 only (random)"))
ggplot(df, aes(x = Group, y = Morans_I, fill = Group)) +
geom_boxplot() +
geom_hline(yintercept = 0, linetype = "dashed") +
labs(
title    = "Moran's I Across 1,000 Simulations",
subtitle = "Left: clusters 1–3 (clusters 1–2 random; cluster 3 zeros). Right: clusters 1–2 only.",
x        = NULL,
y        = "Moran's I",
fill     = "Computation Scope"
) +
theme_minimal(base_size = 12) +
theme(legend.position = "top")
library(ggplot)
library(ggplot2)
set.seed(123)
## --- Fixed coordinates for 3 clusters ---
n_per <- 10
coords <- rbind(
cbind(runif(n_per, 0, 1), runif(n_per, 0, 1)),   # Cluster 1
cbind(runif(n_per, 2, 3), runif(n_per, 0, 1)),   # Cluster 2
cbind(runif(n_per, 4, 5), runif(n_per, 0, 1))    # Cluster 3
)
idx12 <- 1:(2 * n_per)  # indices for clusters 1 & 2
## --- Neighbor graphs (row-standardized weights) ---
k <- 4
nb_all <- knn2nb(knearneigh(coords, k = k))
lw_all <- nb2listw(nb_all, style = "W", zero.policy = TRUE)
nb_12 <- knn2nb(knearneigh(coords[idx12, , drop = FALSE], k = k))
lw_12 <- nb2listw(nb_12, style = "W", zero.policy = TRUE)
## --- Simulation: 1,000 runs, using moran.test() ---
nsim <- 1000
I_all <- numeric(nsim)
I_12  <- numeric(nsim)
for (b in 1:nsim) {
# Values: Clusters 1 & 2 random; Cluster 3 zeros
vals <- c(
rnorm(n_per, 0, 1),   # Cluster 1
rnorm(n_per, 0, 1),   # Cluster 2
rep(0, n_per)         # Cluster 3
)
# All three clusters
res_all <- moran.test(vals, lw_all, zero.policy = TRUE)
I_all[b] <- res_all$estimate[["Moran I statistic"]]
# Clusters 1–2 only
res_12 <- moran.test(vals[idx12], lw_12, zero.policy = TRUE)
I_12[b] <- res_12$estimate[["Moran I statistic"]]
}
## --- Plot two boxplots with clear title & legend ---
df <- rbind(
data.frame(Group = "Clusters 1–3 (1&2 random, 3=0)", Morans_I = I_all),
data.frame(Group = "Clusters 1–2 only (random)",     Morans_I = I_12)
)
df$Group <- factor(df$Group,
levels = c("Clusters 1–3 (1&2 random, 3=0)",
"Clusters 1–2 only (random)"))
ggplot(df, aes(x = Group, y = Morans_I, fill = Group)) +
geom_boxplot() +
geom_hline(yintercept = 0, linetype = "dashed") +
labs(
title    = "Moran's I Across 1,000 Simulations",
subtitle = "Left: clusters 1–3 (clusters 1–2 random; cluster 3 zeros). Right: clusters 1–2 only.",
x        = NULL,
y        = "Moran's I",
fill     = "Computation Scope"
) +
theme_minimal(base_size = 12) +
theme(legend.position = "top")
library(sctransform)
library(Dino)
library(SpaNorm)
sct <- function(x) {}
library(pryr)
sct <- function(x) {
start_run <- Sys.time()
start_mem <- mem_used()
data.frame()
end_mem <- mem_used()
end_run <- Sys.time()
}
sct(1)
y <- sct(1)
sct <- function(x) {
start_run <- Sys.time()
start_mem <- mem_used()
return(data.frame())
end_mem <- mem_used()
end_run <- Sys.time()
}
y <- sct(1)
start_run <- Sys.time()
start_mem <- mem_used()
end_run <- Sys.time()
end_mem <- mem_used()
sct <- function(x, start_run, start_mem, end_run, end_mem) {
start_run <- Sys.time()
start_mem <- mem_used()
data.frame()
end_mem <- mem_used()
end_run <- Sys.time()
}
sct(1)
sct(1, start_run, start_mem, end_run, end_mem)
sct(1, start_run, start_mem, end_run, end_mem)
sct(1, start_run, start_mem, end_run, end_mem)
start_run <- Sys.time()
start_mem <- mem_used()
end_run <- Sys.time()
end_mem <- mem_used()
sct <- function(x, sr, sm, er, em) {
sr <- Sys.time()
sm <- mem_used()
data.frame()
em <- mem_used()
er <- Sys.time()
}
sct(1, start_run, start_mem, end_run, end_mem)
sct(1, start_run, start_mem, end_run, end_mem)
sct(1, start_run, start_mem, end_run, end_mem)
sct(1, start_run, start_mem, end_run, end_mem)
start_run <- Sys.time()
start_mem <- mem_used()
end_run <- Sys.time()
end_mem <- mem_used()
sct <- function(x, sr, sm, er, em) {
sr <- Sys.time()
sm <- mem_used()
return(data.frame(x))
em <- mem_used()
er <- Sys.time()
}
start_run <- Sys.time()
start_mem <- mem_used()
end_run <- Sys.time()
end_mem <- mem_used()
sct <- function(x, sr, sm, er, em) {
sr <- Sys.time()
sm <- mem_used()
return(data.frame(x))
em <- mem_used()
er <- Sys.time()
}
sct(1, start_run, start_mem, end_run, end_mem)
start_run <- Sys.time()
start_mem <- mem_used()
end_run <- Sys.time()
end_mem <- mem_used()
sct <- function(x, sr, sm, er, em) {
sr <- Sys.time()
sm <- mem_used()
return(data.frame(x))
em <- mem_used()
er <- Sys.time()
}
clear
start_run <- Sys.time()
start_mem <- mem_used()
end_run <- Sys.time()
end_mem <- mem_used()
sct <- function(x, sr, sm, er, em) {
sr <- Sys.time()
sm <- mem_used()
Sys.sleep(3)
return(data.frame(x))
em <- mem_used()
er <- Sys.time()
}
clear
start_run <- Sys.time()
start_mem <- mem_used()
end_run <- Sys.time()
end_mem <- mem_used()
sct <- function(x, sr, sm, er, em) {
sr <- Sys.time()
sm <- mem_used()
Sys.sleep(3)
return(data.frame(x))
em <- mem_used()
er <- Sys.time()
}
sct(1, start_run, start_mem, end_run, end_mem)
start_run <- Sys.time()
start_mem <- mem_used()
end_run <- Sys.time()
end_mem <- mem_used()
sct <- function(x) {
start_run <- Sys.time()
start_mem <- mem_used()
Sys.sleep(3)
return(data.frame(x))
end_mem <- mem_used()
end_run <- Sys.time()
}
sct(1)
start_run <- Sys.time()
start_mem <- mem_used()
end_run <- Sys.time()
end_mem <- mem_used()
sct <- function(x) {
start_run <- Sys.time()
start_mem <- mem_used()
Sys.sleep(3)
data.frame(x)
end_mem <- mem_used()
end_run <- Sys.time()
}
start_run <- Sys.time()
start_mem <- mem_used()
end_run <- Sys.time()
end_mem <- mem_used()
sct <- function(x) {
start_run <- Sys.time()
start_mem <- mem_used()
Sys.sleep(3)
data.frame(x)
end_mem <- mem_used()
end_run <- Sys.time()
}
sct(1)
r <- 1
r_copy <- r
x <- data.frame(1)
y <- x
start_run <- Sys.time()
start_mem <- mem_used()
z <- data.frame(y)
rm(y)
end_mem <- mem_used()
end_run <- Sys.time()
x <- data.frame(1)
y <- x
start_run <- Sys.time()
start_mem <- mem_used()
z <- data.frame(y)
rm(y)
end_mem <- mem_used()
end_run <- Sys.time()
x <- data.frame(1)
y <- x
start_run <- Sys.time()
start_mem <- mem_used()
z <- data.frame(y)
Sys.sleep(3)
rm(y)
end_mem <- mem_used()
end_run <- Sys.time()
library(anndata)
setwd("Desktop/spTransKit")
x <- read_h5ad("src/sptranskit/data/filtered_raw.h5ad")
x <- read_h5ad("src/sptranskit/data/DLPFC_151673/filtered_raw.h5ad")
as.matrix(x)
x.obsm["spatial"]
keys(x)
clear
